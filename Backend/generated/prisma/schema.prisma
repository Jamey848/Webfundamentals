generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = "mysql://root:D1t1s33nP4sw00rd@localhost:3306/shopchapdatabase"
}

model category {
  categoryID   Int       @id @default(autoincrement())
  categoryname String    @db.VarChar(255)
  product      product[]
}

model product {
  productID    Int            @id @default(autoincrement())
  productname  String?        @db.VarChar(255)
  categoryID   Int
  category     category       @relation(fields: [categoryID], references: [categoryID], onDelete: NoAction, onUpdate: NoAction, map: "product_ibfk_1")
  receiptitems receiptitems[]

  @@index([categoryID], map: "categoryID")
}

model receipt {
  receiptID      Int            @id @default(autoincrement())
  usersID        Int
  receiptname    String?        @db.VarChar(255)
  receiptdate    DateTime?      @db.Date
  futurepurchase Boolean?
  storeID        Int
  budgetID       Int?
  budget         budget?        @relation(fields: [budgetID], references: [budgetID], onDelete: NoAction, onUpdate: NoAction, map: "fk_budget")
  store          store          @relation(fields: [storeID], references: [storeID], onDelete: NoAction, onUpdate: NoAction, map: "fk_receipt_store")
  users          users          @relation(fields: [usersID], references: [usersID], onDelete: NoAction, onUpdate: NoAction, map: "receipt_ibfk_1")
  receiptitems   receiptitems[]

  @@index([usersID], map: "usersID")
  @@index([storeID], map: "fk_receipt_store")
  @@index([budgetID], map: "fk_budget")
}

model store {
  storeID   Int       @id @default(autoincrement())
  storename String?   @db.VarChar(255)
  receipt   receipt[]
}

model unit {
  unitID       Int            @id @default(autoincrement())
  unitname     String         @db.VarChar(255)
  receiptitems receiptitems[]
}

model users {
  usersID      Int       @id @default(autoincrement())
  username     String    @db.VarChar(255)
  userpassword String    @db.VarChar(255)
  gmail        String    @db.VarChar(255)
  permission   Int
  receipt      receipt[]
}

model budget {
  budgetID     Int       @id @default(autoincrement())
  usersID      Int
  budgetamount Decimal?  @db.Decimal(10, 2)
  startdate    DateTime? @db.Date
  enddate      DateTime? @db.Date
  receipt      receipt[]
}

model receiptitems {
  receiptitemsID Int      @id @default(autoincrement())
  productID      Int
  unitID         Int
  receiptID      Int
  price          Decimal? @db.Decimal(10, 2)
  quantity       Int?
  amount         Int?
  product        product  @relation(fields: [productID], references: [productID], onDelete: NoAction, onUpdate: NoAction, map: "receiptitems_ibfk_1")
  unit           unit     @relation(fields: [unitID], references: [unitID], onDelete: NoAction, onUpdate: NoAction, map: "receiptitems_ibfk_3")
  receipt        receipt  @relation(fields: [receiptID], references: [receiptID], onDelete: Cascade, onUpdate: NoAction, map: "receiptitems_ibfk_4")

  @@index([productID], map: "productID")
  @@index([receiptID], map: "receiptID")
  @@index([unitID], map: "unitID")
}
